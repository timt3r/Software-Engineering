<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Financial Friend</title>
  <link rel="stylesheet" href="static/css/index.css">
</head>
<body>
  <!-- Title -->
  <div id="title_div">
    <h2>Financial Friend</h2>
  </div>

  <!-- Left Column -->
  <div id="left_col">
    <ul id="transactions-list">
      <!-- Transaction list will be inserted here -->
    </ul>
  </div>

  <!-- Right Column -->
  <div id="right_col">
    <p>Graphs Here</p>
  </div>

  <script>
    // Fetch the bankTransactions.json file
    fetch('bankTransactions.json')
      .then(response => response.json()) // Parse the JSON data
      .then(data => {

        // Access the transactions array from the data object
        const transactions = data.bankAccount.transactions;

        // Check if transactions is an array
        if (Array.isArray(transactions)) {
          // Display the transactions in the left column
          displayTransactions(transactions);
        }

        // Display the entire JSON data in the right column
        displayJsonData(data);
      })
      .catch(error => console.error('Error loading the JSON file:', error));

      
  function displayTransactions(transactions) {
    const listContainer = document.getElementById('transactions-list');
    if (listContainer) {

      listContainer.innerHTML = '';

      // Reverse so that newest transaction is at top
      const reversedTransactions = transactions.slice().reverse();

      reversedTransactions.forEach(transaction => {
        const li = document.createElement('li');
        let category = transaction.category || categorizeTransaction(transaction.description);
        transaction.category = category;

        // Determine the color based on negative or positive
        const color = transaction.amount < 0 ? 'red' : 'green';

        li.innerHTML = `
          <b>Date</b>: ${transaction.date} <br>
          <b>Amount:</b> <span style="color: ${color};">$${transaction.amount}</span> <br>
          <b>Description:</b> ${transaction.description} <br>
          <b>Category:</b> ${category}<br><br>
        `;

        // Display in LI
        listContainer.appendChild(li);
      });
    }
}

  function categorizeTransaction(description) {
    // In the real implementation this would have a full list of options for each category

    let category = "";
    
    if(description == "Apartment Services") {
      category = "Rent";
    }
    else if(description == "Direct Deposit") {
      category = "Paycheck";
    }
    else if(description == "Giant Eagle") {
      category = "Groceries";
    }
    else if(description == "McDonald's" || description == "Dunkin' Donuts" || description == "Pizza Restaurant"){
      category = "Takeout";
    }
    else if(description == "Sheetz" || description == "Sunoco"){
      category = "Gas";
    }
    else if(description == "Venmo"){
      category = "Other Income";
    }


    return category;
  }


  </script>
</body>
</html>
